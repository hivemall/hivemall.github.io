
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>List of Generic Hivemall Functions Â· Hivemall User Manual</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-multipart/multipart.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-emphasize/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="topk.html" />
    
    
    <link rel="prev" href="../troubleshooting/mapjoin_classcastex.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://hivemall.incubator.apache.org/" target="_blank" class="custom-link"><i class="fa fa-home"></i> Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        <li class="header">TABLE OF CONTENTS</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting_started/">
            
                <a href="../getting_started/">
            
                    
                        <b>1.2.</b>
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../getting_started/installation.html">
            
                <a href="../getting_started/installation.html">
            
                    
                        <b>1.2.1.</b>
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../getting_started/permanent-functions.html">
            
                <a href="../getting_started/permanent-functions.html">
            
                    
                        <b>1.2.2.</b>
                    
                    Install as permanent functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../getting_started/input-format.html">
            
                <a href="../getting_started/input-format.html">
            
                    
                        <b>1.2.3.</b>
                    
                    Input Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="funcs.html">
            
                <a href="funcs.html">
            
                    
                        <b>1.3.</b>
                    
                    List of Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tips/">
            
                <a href="../tips/">
            
                    
                        <b>1.4.</b>
                    
                    Tips for Effective Hivemall
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../tips/addbias.html">
            
                <a href="../tips/addbias.html">
            
                    
                        <b>1.4.1.</b>
                    
                    Explicit add_bias() for better prediction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../tips/rand_amplify.html">
            
                <a href="../tips/rand_amplify.html">
            
                    
                        <b>1.4.2.</b>
                    
                    Use rand_amplify() to better prediction results
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../tips/rt_prediction.html">
            
                <a href="../tips/rt_prediction.html">
            
                    
                        <b>1.4.3.</b>
                    
                    Real-time prediction on RDBMS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../tips/ensemble_learning.html">
            
                <a href="../tips/ensemble_learning.html">
            
                    
                        <b>1.4.4.</b>
                    
                    Ensemble learning for stable prediction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../tips/mixserver.html">
            
                <a href="../tips/mixserver.html">
            
                    
                        <b>1.4.5.</b>
                    
                    Mixing models for a better prediction convergence (MIX server)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../tips/emr.html">
            
                <a href="../tips/emr.html">
            
                    
                        <b>1.4.6.</b>
                    
                    Run Hivemall on Amazon Elastic MapReduce
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tips/general_tips.html">
            
                <a href="../tips/general_tips.html">
            
                    
                        <b>1.5.</b>
                    
                    General Hive/Hadoop Tips
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../tips/rowid.html">
            
                <a href="../tips/rowid.html">
            
                    
                        <b>1.5.1.</b>
                    
                    Adding rowid for each row
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../tips/hadoop_tuning.html">
            
                <a href="../tips/hadoop_tuning.html">
            
                    
                        <b>1.5.2.</b>
                    
                    Hadoop tuning for Hivemall
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../troubleshooting/">
            
                <a href="../troubleshooting/">
            
                    
                        <b>1.6.</b>
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../troubleshooting/oom.html">
            
                <a href="../troubleshooting/oom.html">
            
                    
                        <b>1.6.1.</b>
                    
                    OutOfMemoryError in training
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../troubleshooting/mapjoin_task_error.html">
            
                <a href="../troubleshooting/mapjoin_task_error.html">
            
                    
                        <b>1.6.2.</b>
                    
                    SemanticException generate map join task error: Cannot serialize object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../troubleshooting/asterisk.html">
            
                <a href="../troubleshooting/asterisk.html">
            
                    
                        <b>1.6.3.</b>
                    
                    Asterisk argument for UDTF does not work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../troubleshooting/num_mappers.html">
            
                <a href="../troubleshooting/num_mappers.html">
            
                    
                        <b>1.6.4.</b>
                    
                    The number of mappers is less than input splits in Hadoop 2.x
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../troubleshooting/mapjoin_classcastex.html">
            
                <a href="../troubleshooting/mapjoin_classcastex.html">
            
                    
                        <b>1.6.5.</b>
                    
                    Map-side join causes ClassCastException on Tez
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part II - Generic Features</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="generic_funcs.html">
            
                <a href="generic_funcs.html">
            
                    
                        <b>2.1.</b>
                    
                    List of Generic Hivemall Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topk.html">
            
                <a href="topk.html">
            
                    
                        <b>2.2.</b>
                    
                    Efficient Top-K Query Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="tokenizer.html">
            
                <a href="tokenizer.html">
            
                    
                        <b>2.3.</b>
                    
                    Text Tokenizer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="approx.html">
            
                <a href="approx.html">
            
                    
                        <b>2.4.</b>
                    
                    Approximate Aggregate Functions
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part III - Feature Engineering</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../ft_engineering/scaling.html">
            
                <a href="../ft_engineering/scaling.html">
            
                    
                        <b>3.1.</b>
                    
                    Feature Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../ft_engineering/hashing.html">
            
                <a href="../ft_engineering/hashing.html">
            
                    
                        <b>3.2.</b>
                    
                    Feature Hashing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../ft_engineering/selection.html">
            
                <a href="../ft_engineering/selection.html">
            
                    
                        <b>3.3.</b>
                    
                    Feature Selection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../ft_engineering/binning.html">
            
                <a href="../ft_engineering/binning.html">
            
                    
                        <b>3.4.</b>
                    
                    Feature Binning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../ft_engineering/pairing.html">
            
                <a href="../ft_engineering/pairing.html">
            
                    
                        <b>3.5.</b>
                    
                    Feature Paring
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../ft_engineering/polynomial.html">
            
                <a href="../ft_engineering/polynomial.html">
            
                    
                        <b>3.5.1.</b>
                    
                    Polynomial features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../ft_engineering/ft_trans.html">
            
                <a href="../ft_engineering/ft_trans.html">
            
                    
                        <b>3.6.</b>
                    
                    Feature Transformation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../ft_engineering/vectorization.html">
            
                <a href="../ft_engineering/vectorization.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Feature vectorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../ft_engineering/quantify.html">
            
                <a href="../ft_engineering/quantify.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Quantify non-number features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../ft_engineering/binarize.html">
            
                <a href="../ft_engineering/binarize.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Binarize label
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../ft_engineering/onehot.html">
            
                <a href="../ft_engineering/onehot.html">
            
                    
                        <b>3.6.4.</b>
                    
                    One-hot encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../ft_engineering/term_vector.html">
            
                <a href="../ft_engineering/term_vector.html">
            
                    
                        <b>3.7.</b>
                    
                    Term Vector Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../ft_engineering/tfidf.html">
            
                <a href="../ft_engineering/tfidf.html">
            
                    
                        <b>3.7.1.</b>
                    
                    TF-IDF Term Weighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../ft_engineering/bm25.html">
            
                <a href="../ft_engineering/bm25.html">
            
                    
                        <b>3.7.2.</b>
                    
                    Okapi BM25 Term Weighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part IV - Evaluation</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../eval/binary_classification_measures.html">
            
                <a href="../eval/binary_classification_measures.html">
            
                    
                        <b>4.1.</b>
                    
                    Binary Classification Metrics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../eval/auc.html">
            
                <a href="../eval/auc.html">
            
                    
                        <b>4.1.1.</b>
                    
                    Area under the ROC curve
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../eval/multilabel_classification_measures.html">
            
                <a href="../eval/multilabel_classification_measures.html">
            
                    
                        <b>4.2.</b>
                    
                    Multi-label Classification Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../eval/regression.html">
            
                <a href="../eval/regression.html">
            
                    
                        <b>4.3.</b>
                    
                    Regression Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../eval/rank.html">
            
                <a href="../eval/rank.html">
            
                    
                        <b>4.4.</b>
                    
                    Ranking Measures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../eval/datagen.html">
            
                <a href="../eval/datagen.html">
            
                    
                        <b>4.5.</b>
                    
                    Data Generation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="../eval/lr_datagen.html">
            
                <a href="../eval/lr_datagen.html">
            
                    
                        <b>4.5.1.</b>
                    
                    Logistic Regression data generation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part V - Supervised Learning</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../supervised_learning/prediction.html">
            
                <a href="../supervised_learning/prediction.html">
            
                    
                        <b>5.1.</b>
                    
                    How Prediction Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../supervised_learning/tutorial.html">
            
                <a href="../supervised_learning/tutorial.html">
            
                    
                        <b>5.2.</b>
                    
                    Step-by-Step Tutorial on Supervised Learning
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part VI - Binary Classification</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../binaryclass/general.html">
            
                <a href="../binaryclass/general.html">
            
                    
                        <b>6.1.</b>
                    
                    Binary Classification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../binaryclass/a9a.html">
            
                <a href="../binaryclass/a9a.html">
            
                    
                        <b>6.2.</b>
                    
                    a9a Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1" data-path="../binaryclass/a9a_dataset.html">
            
                <a href="../binaryclass/a9a_dataset.html">
            
                    
                        <b>6.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.2" data-path="../binaryclass/a9a_generic.html">
            
                <a href="../binaryclass/a9a_generic.html">
            
                    
                        <b>6.2.2.</b>
                    
                    General Binary Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.3" data-path="../binaryclass/a9a_lr.html">
            
                <a href="../binaryclass/a9a_lr.html">
            
                    
                        <b>6.2.3.</b>
                    
                    Logistic Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.4" data-path="../binaryclass/a9a_minibatch.html">
            
                <a href="../binaryclass/a9a_minibatch.html">
            
                    
                        <b>6.2.4.</b>
                    
                    Mini-batch Gradient Descent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../binaryclass/news20.html">
            
                <a href="../binaryclass/news20.html">
            
                    
                        <b>6.3.</b>
                    
                    News20 Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="../binaryclass/news20_dataset.html">
            
                <a href="../binaryclass/news20_dataset.html">
            
                    
                        <b>6.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.2" data-path="../binaryclass/news20_pa.html">
            
                <a href="../binaryclass/news20_pa.html">
            
                    
                        <b>6.3.2.</b>
                    
                    Perceptron, Passive Aggressive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.3" data-path="../binaryclass/news20_scw.html">
            
                <a href="../binaryclass/news20_scw.html">
            
                    
                        <b>6.3.3.</b>
                    
                    CW, AROW, SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.4" data-path="../binaryclass/news20_generic.html">
            
                <a href="../binaryclass/news20_generic.html">
            
                    
                        <b>6.3.4.</b>
                    
                    General Binary Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.5" data-path="../binaryclass/news20_generic_bagging.html">
            
                <a href="../binaryclass/news20_generic_bagging.html">
            
                    
                        <b>6.3.5.</b>
                    
                    Baggnig classiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.6" data-path="../binaryclass/news20_adagrad.html">
            
                <a href="../binaryclass/news20_adagrad.html">
            
                    
                        <b>6.3.6.</b>
                    
                    AdaGradRDA, AdaGrad, AdaDelta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.7" data-path="../binaryclass/news20_rf.html">
            
                <a href="../binaryclass/news20_rf.html">
            
                    
                        <b>6.3.7.</b>
                    
                    Random Forest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.8" data-path="../binaryclass/news20b_xgboost.html">
            
                <a href="../binaryclass/news20b_xgboost.html">
            
                    
                        <b>6.3.8.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../binaryclass/kdd2010a.html">
            
                <a href="../binaryclass/kdd2010a.html">
            
                    
                        <b>6.4.</b>
                    
                    KDD2010a Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.4.1" data-path="../binaryclass/kdd2010a_dataset.html">
            
                <a href="../binaryclass/kdd2010a_dataset.html">
            
                    
                        <b>6.4.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.2" data-path="../binaryclass/kdd2010a_scw.html">
            
                <a href="../binaryclass/kdd2010a_scw.html">
            
                    
                        <b>6.4.2.</b>
                    
                    PA, CW, AROW, SCW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="../binaryclass/kdd2010b.html">
            
                <a href="../binaryclass/kdd2010b.html">
            
                    
                        <b>6.5.</b>
                    
                    KDD2010b Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.5.1" data-path="../binaryclass/kdd2010b_dataset.html">
            
                <a href="../binaryclass/kdd2010b_dataset.html">
            
                    
                        <b>6.5.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.2" data-path="../binaryclass/kdd2010b_arow.html">
            
                <a href="../binaryclass/kdd2010b_arow.html">
            
                    
                        <b>6.5.2.</b>
                    
                    AROW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="../binaryclass/webspam.html">
            
                <a href="../binaryclass/webspam.html">
            
                    
                        <b>6.6.</b>
                    
                    Webspam Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.1" data-path="../binaryclass/webspam_dataset.html">
            
                <a href="../binaryclass/webspam_dataset.html">
            
                    
                        <b>6.6.1.</b>
                    
                    Data Pareparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.2" data-path="../binaryclass/webspam_scw.html">
            
                <a href="../binaryclass/webspam_scw.html">
            
                    
                        <b>6.6.2.</b>
                    
                    PA1, AROW, SCW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="../binaryclass/titanic_rf.html">
            
                <a href="../binaryclass/titanic_rf.html">
            
                    
                        <b>6.7.</b>
                    
                    Kaggle Titanic Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="../binaryclass/criteo.html">
            
                <a href="../binaryclass/criteo.html">
            
                    
                        <b>6.8.</b>
                    
                    Criteo Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.8.1" data-path="../binaryclass/criteo_dataset.html">
            
                <a href="../binaryclass/criteo_dataset.html">
            
                    
                        <b>6.8.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8.2" data-path="../binaryclass/criteo_ffm.html">
            
                <a href="../binaryclass/criteo_ffm.html">
            
                    
                        <b>6.8.2.</b>
                    
                    Field-Aware Factorization Machines
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part VII - Multiclass Classification</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../multiclass/news20.html">
            
                <a href="../multiclass/news20.html">
            
                    
                        <b>7.1.</b>
                    
                    News20 Multiclass Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="../multiclass/news20_dataset.html">
            
                <a href="../multiclass/news20_dataset.html">
            
                    
                        <b>7.1.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="../multiclass/news20_one-vs-the-rest_dataset.html">
            
                <a href="../multiclass/news20_one-vs-the-rest_dataset.html">
            
                    
                        <b>7.1.2.</b>
                    
                    Data Preparation for one-vs-the-rest classifiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" data-path="../multiclass/news20_pa.html">
            
                <a href="../multiclass/news20_pa.html">
            
                    
                        <b>7.1.3.</b>
                    
                    PA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.4" data-path="../multiclass/news20_scw.html">
            
                <a href="../multiclass/news20_scw.html">
            
                    
                        <b>7.1.4.</b>
                    
                    CW, AROW, SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.5" data-path="../multiclass/news20_xgboost.html">
            
                <a href="../multiclass/news20_xgboost.html">
            
                    
                        <b>7.1.5.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.6" data-path="../multiclass/news20_ensemble.html">
            
                <a href="../multiclass/news20_ensemble.html">
            
                    
                        <b>7.1.6.</b>
                    
                    Ensemble learning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.7" data-path="../multiclass/news20_one-vs-the-rest.html">
            
                <a href="../multiclass/news20_one-vs-the-rest.html">
            
                    
                        <b>7.1.7.</b>
                    
                    one-vs-the-rest Classifier
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../multiclass/iris.html">
            
                <a href="../multiclass/iris.html">
            
                    
                        <b>7.2.</b>
                    
                    Iris Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.2.1" data-path="../multiclass/iris_dataset.html">
            
                <a href="../multiclass/iris_dataset.html">
            
                    
                        <b>7.2.1.</b>
                    
                    Data preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.2" data-path="../multiclass/iris_scw.html">
            
                <a href="../multiclass/iris_scw.html">
            
                    
                        <b>7.2.2.</b>
                    
                    SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.3" data-path="../multiclass/iris_randomforest.html">
            
                <a href="../multiclass/iris_randomforest.html">
            
                    
                        <b>7.2.3.</b>
                    
                    Random Forest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.4" data-path="../multiclass/iris_xgboost.html">
            
                <a href="../multiclass/iris_xgboost.html">
            
                    
                        <b>7.2.4.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part VIII - Regression</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../regression/general.html">
            
                <a href="../regression/general.html">
            
                    
                        <b>8.1.</b>
                    
                    Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../regression/e2006.html">
            
                <a href="../regression/e2006.html">
            
                    
                        <b>8.2.</b>
                    
                    E2006-tfidf Regression Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="../regression/e2006_dataset.html">
            
                <a href="../regression/e2006_dataset.html">
            
                    
                        <b>8.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="../regression/e2006_generic.html">
            
                <a href="../regression/e2006_generic.html">
            
                    
                        <b>8.2.2.</b>
                    
                    General Regessor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.3" data-path="../regression/e2006_arow.html">
            
                <a href="../regression/e2006_arow.html">
            
                    
                        <b>8.2.3.</b>
                    
                    Passive Aggressive, AROW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.4" data-path="../regression/e2006_xgboost.html">
            
                <a href="../regression/e2006_xgboost.html">
            
                    
                        <b>8.2.4.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../regression/kddcup12tr2.html">
            
                <a href="../regression/kddcup12tr2.html">
            
                    
                        <b>8.3.</b>
                    
                    KDDCup 2012 Track 2 CTR Prediction Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="../regression/kddcup12tr2_dataset.html">
            
                <a href="../regression/kddcup12tr2_dataset.html">
            
                    
                        <b>8.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.2" data-path="../regression/kddcup12tr2_lr.html">
            
                <a href="../regression/kddcup12tr2_lr.html">
            
                    
                        <b>8.3.2.</b>
                    
                    Logistic Regression, Passive Aggressive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.3" data-path="../regression/kddcup12tr2_lr_amplify.html">
            
                <a href="../regression/kddcup12tr2_lr_amplify.html">
            
                    
                        <b>8.3.3.</b>
                    
                    Logistic Regression with amplifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.4" data-path="../regression/kddcup12tr2_adagrad.html">
            
                <a href="../regression/kddcup12tr2_adagrad.html">
            
                    
                        <b>8.3.4.</b>
                    
                    AdaGrad, AdaDelta
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part IX - Recommendation</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../recommend/cf.html">
            
                <a href="../recommend/cf.html">
            
                    
                        <b>9.1.</b>
                    
                    Collaborative Filtering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="../recommend/item_based_cf.html">
            
                <a href="../recommend/item_based_cf.html">
            
                    
                        <b>9.1.1.</b>
                    
                    Item-based Collaborative Filtering
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../recommend/news20.html">
            
                <a href="../recommend/news20.html">
            
                    
                        <b>9.2.</b>
                    
                    News20 Related Article Recommendation Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.2.1" data-path="../multiclass/news20_dataset.html">
            
                <a href="../multiclass/news20_dataset.html">
            
                    
                        <b>9.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.2" data-path="../recommend/news20_jaccard.html">
            
                <a href="../recommend/news20_jaccard.html">
            
                    
                        <b>9.2.2.</b>
                    
                    LSH/MinHash and Jaccard Similarity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.3" data-path="../recommend/news20_knn.html">
            
                <a href="../recommend/news20_knn.html">
            
                    
                        <b>9.2.3.</b>
                    
                    LSH/MinHash and Brute-force Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.4" data-path="../recommend/news20_bbit_minhash.html">
            
                <a href="../recommend/news20_bbit_minhash.html">
            
                    
                        <b>9.2.4.</b>
                    
                    kNN search using b-Bits MinHash
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../recommend/movielens.html">
            
                <a href="../recommend/movielens.html">
            
                    
                        <b>9.3.</b>
                    
                    MovieLens Movie Recommendation Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.3.1" data-path="../recommend/movielens_dataset.html">
            
                <a href="../recommend/movielens_dataset.html">
            
                    
                        <b>9.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.2" data-path="../recommend/movielens_cf.html">
            
                <a href="../recommend/movielens_cf.html">
            
                    
                        <b>9.3.2.</b>
                    
                    Item-based Collaborative Filtering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.3" data-path="../recommend/movielens_mf.html">
            
                <a href="../recommend/movielens_mf.html">
            
                    
                        <b>9.3.3.</b>
                    
                    Matrix Factorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.4" data-path="../recommend/movielens_fm.html">
            
                <a href="../recommend/movielens_fm.html">
            
                    
                        <b>9.3.4.</b>
                    
                    Factorization Machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.5" data-path="../recommend/movielens_slim.html">
            
                <a href="../recommend/movielens_slim.html">
            
                    
                        <b>9.3.5.</b>
                    
                    SLIM for fast top-k Recommendation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.6" data-path="../recommend/movielens_cv.html">
            
                <a href="../recommend/movielens_cv.html">
            
                    
                        <b>9.3.6.</b>
                    
                    10-fold Cross Validation (Matrix Factorization)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part X - Anomaly Detection</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../anomaly/lof.html">
            
                <a href="../anomaly/lof.html">
            
                    
                        <b>10.1.</b>
                    
                    Outlier Detection using Local Outlier Factor (LOF)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../anomaly/sst.html">
            
                <a href="../anomaly/sst.html">
            
                    
                        <b>10.2.</b>
                    
                    Change-Point Detection using Singular Spectrum Transformation (SST)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../anomaly/changefinder.html">
            
                <a href="../anomaly/changefinder.html">
            
                    
                        <b>10.3.</b>
                    
                    ChangeFinder: Detecting Outlier and Change-Point Simultaneously
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XI - Clustering</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../clustering/lda.html">
            
                <a href="../clustering/lda.html">
            
                    
                        <b>11.1.</b>
                    
                    Latent Dirichlet Allocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../clustering/plsa.html">
            
                <a href="../clustering/plsa.html">
            
                    
                        <b>11.2.</b>
                    
                    Probabilistic Latent Semantic Analysis
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XII - GeoSpatial Functions</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../geospatial/latlon.html">
            
                <a href="../geospatial/latlon.html">
            
                    
                        <b>12.1.</b>
                    
                    Lat/Lon functions
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XIII - Hivemall on SparkSQL</li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="../spark/getting_started/README.md">
            
                <span>
            
                    
                        <b>13.1.</b>
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.1.1" data-path="../spark/getting_started/installation.html">
            
                <a href="../spark/getting_started/installation.html">
            
                    
                        <b>13.1.1.</b>
                    
                    Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="../spark/binaryclass/">
            
                <a href="../spark/binaryclass/">
            
                    
                        <b>13.2.</b>
                    
                    Binary Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.2.1" data-path="../spark/binaryclass/a9a_sql.html">
            
                <a href="../spark/binaryclass/a9a_sql.html">
            
                    
                        <b>13.2.1.</b>
                    
                    a9a Tutorial for SQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="../spark/binaryclass/">
            
                <a href="../spark/binaryclass/">
            
                    
                        <b>13.3.</b>
                    
                    Regression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.3.1" data-path="../spark/regression/e2006_sql.html">
            
                <a href="../spark/regression/e2006_sql.html">
            
                    
                        <b>13.3.1.</b>
                    
                    E2006-tfidf Regression Tutorial for SQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part XIV - Hivemall on Docker</li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="../docker/getting_started.html">
            
                <a href="../docker/getting_started.html">
            
                    
                        <b>14.1.</b>
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XIV - External References</li>
        
        
    
        <li class="chapter " data-level="15.1" >
            
                <a target="_blank" href="https://github.com/daijyc/hivemall/wiki/PigHome">
            
                    
                        <b>15.1.</b>
                    
                    Hivemall on Apache Pig
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >List of Generic Hivemall Functions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<p>This page describes a list of useful Hivemall generic functions. See also a <a href="funcs.html">list of machine-learning-related functions</a>.</p>
<!-- toc --><div id="toc" class="toc">

<ul>
<li><a href="#aggregation">Aggregation</a></li>
<li><a href="#array">Array</a></li>
<li><a href="#bitset">Bitset</a></li>
<li><a href="#compression">Compression</a></li>
<li><a href="#datetime">Datetime</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#map">Map</a></li>
<li><a href="#mapreduce">MapReduce</a></li>
<li><a href="#math">Math</a></li>
<li><a href="#vectormatrix">Vector/Matrix</a></li>
<li><a href="#sanity-checks">Sanity Checks</a></li>
<li><a href="#text-processing">Text processing</a></li>
<li><a href="#timeseries">Timeseries</a></li>
<li><a href="#others">Others</a></li>
</ul>

</div><!-- tocstop -->
<h1 id="aggregation">Aggregation</h1>
<ul>
<li><p><code>majority_vote(Primitive x)</code> - Returns the most frequent value of x</p>
<pre><code class="lang-sql"><span class="hljs-comment">-- see https://issues.apache.org/jira/browse/HIVE-17406 </span>
WITH data as (
  <span class="hljs-keyword">select</span>
    explode(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>, <span class="hljs-string">&apos;5&apos;</span>, <span class="hljs-string">&apos;4&apos;</span>, <span class="hljs-string">&apos;1&apos;</span>, <span class="hljs-string">&apos;2&apos;</span>)) <span class="hljs-keyword">as</span> k
)
<span class="hljs-keyword">select</span>
  majority_vote(k) <span class="hljs-keyword">as</span> k
<span class="hljs-keyword">from</span> 
  <span class="hljs-keyword">data</span>;
2
</code></pre>
</li>
<li><p><code>max_by(x, y)</code> - Returns the value of x associated with the maximum value of y over all input values.</p>
<pre><code class="lang-sql"><span class="hljs-comment">-- see https://issues.apache.org/jira/browse/HIVE-17406 </span>
WITH data as (
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;jake&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">18</span> <span class="hljs-keyword">as</span> age
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;tom&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">64</span> <span class="hljs-keyword">as</span> age
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;lisa&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">32</span> <span class="hljs-keyword">as</span> age
)
<span class="hljs-keyword">select</span>
  max_by(<span class="hljs-keyword">name</span>, age) <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">data</span>;
tom
</code></pre>
</li>
<li><p><code>min_by(x, y)</code> - Returns the value of x associated with the minimum value of y over all input values.</p>
<pre><code class="lang-sql"><span class="hljs-comment">-- see https://issues.apache.org/jira/browse/HIVE-17406 </span>
WITH data as (
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;jake&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">18</span> <span class="hljs-keyword">as</span> age
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;tom&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">64</span> <span class="hljs-keyword">as</span> age
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-string">&apos;lisa&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>, <span class="hljs-number">32</span> <span class="hljs-keyword">as</span> age
)
<span class="hljs-keyword">select</span>
  min_by(<span class="hljs-keyword">name</span>, age) <span class="hljs-keyword">as</span> <span class="hljs-keyword">name</span>
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">data</span>;

jake
</code></pre>
</li>
</ul>
<h1 id="array">Array</h1>
<ul>
<li><p><code>arange([int start=0, ] int stop, [int step=1])</code> - Return evenly spaced values within a given interval</p>
<pre><code class="lang-sql">SELECT arange(5), arange(1, 5), arange(1, 5, 1), arange(0, 5, 1);
&gt; [0,1,2,3,4]     [1,2,3,4]       [1,2,3,4]       [0,1,2,3,4]

SELECT arange(1, 6, 2);
&gt; 1, 3, 5

SELECT arange(-1, -6, 2);
-1, -3, -5
</code></pre>
</li>
<li><p><code>argmax(array&lt;T&gt; a)</code> - Returns the first index of the maximum value</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> argmax(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>));
0
</code></pre>
</li>
<li><p><code>argmin(array&lt;T&gt; a)</code> - Returns the first index of the minimum value</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> argmin(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>));
2
</code></pre>
</li>
<li><p><code>argrank(array&lt;ANY&gt; a)</code> - Returns the indices that would sort an array.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> argrank(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)), argsort(argsort(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)));
[3, 2, 0, 1]     [3, 2, 0, 1]
</code></pre>
</li>
<li><p><code>argsort(array&lt;ANY&gt; a)</code> - Returns the indices that would sort an array.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> argsort(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>));
2, 3, 1, 0

<span class="hljs-keyword">SELECT</span> array_slice(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>), argsort(<span class="hljs-built_in">array</span>(<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)));
0, 1, 2, 5
</code></pre>
</li>
<li><p><code>array_append(array&lt;T&gt; arr, T elem)</code> - Append an element to the end of an array</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_append(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),<span class="hljs-number">3</span>);
 1,2,3

<span class="hljs-keyword">SELECT</span> array_append(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;a&apos;</span>,<span class="hljs-string">&apos;b&apos;</span>),<span class="hljs-string">&apos;c&apos;</span>);
 &quot;a&quot;,&quot;b&quot;,&quot;c&quot;
</code></pre>
</li>
<li><p><code>array_avg(array&lt;number&gt;)</code> - Returns an array&lt;double&gt; in which each element is the mean of a set of numbers</p>
<pre><code class="lang-sql">WITH input as (
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>) <span class="hljs-keyword">as</span> nums
  <span class="hljs-keyword">UNION</span> ALL
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>) <span class="hljs-keyword">as</span> nums
)
<span class="hljs-keyword">select</span>
  array_avg(nums)
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">input</span>;

[&quot;1.5&quot;,&quot;2.5&quot;,&quot;3.5&quot;]
</code></pre>
</li>
<li><p><code>array_concat(array&lt;ANY&gt; x1, array&lt;ANY&gt; x2, ..)</code> - Returns a concatenated array</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_concat(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>));
 [1,2,3]
</code></pre>
</li>
<li><p><code>array_flatten(array&lt;array&lt;ANY&gt;&gt;)</code> - Returns an array with the elements flattened.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_flatten(<span class="hljs-built_in">array</span>(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>)));
 [1,2,3,4,5,6,7,8]
</code></pre>
</li>
<li><p><code>array_intersect(array&lt;ANY&gt; x1, array&lt;ANY&gt; x2, ..)</code> - Returns an intersect of given arrays</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_intersect(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">3</span>,<span class="hljs-number">5</span>));
 [3]
</code></pre>
</li>
<li><p><code>array_remove(array&lt;PRIMITIVE&gt; values, PRIMITIVE|array&lt;PRIMITIVE&gt; target)</code> - Returns an array that the target elements are removed from the original array</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>,<span class="hljs-number">2.1</span>,<span class="hljs-number">3.0</span>,<span class="hljs-number">4.0</span>,<span class="hljs-number">2.0</span>),<span class="hljs-number">2</span>), array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>,<span class="hljs-number">4.0</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">3</span>,<span class="hljs-number">2.0</span>));
[2.1,3,4]       [4]

<span class="hljs-keyword">SELECT</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>),<span class="hljs-literal">null</span>);
[1,3]

<span class="hljs-keyword">SELECT</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">5</span>),<span class="hljs-literal">null</span>);
[1,3,5]

<span class="hljs-keyword">SELECT</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">3</span>),<span class="hljs-built_in">array</span>(<span class="hljs-literal">null</span>));
[1,3]

<span class="hljs-keyword">SELECT</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;aaa&apos;</span>,<span class="hljs-string">&apos;bbb&apos;</span>),<span class="hljs-string">&apos;bbb&apos;</span>);
[&quot;aaa&quot;]

<span class="hljs-keyword">SELECT</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;aaa&apos;</span>,<span class="hljs-string">&apos;bbb&apos;</span>,<span class="hljs-string">&apos;ccc&apos;</span>,<span class="hljs-string">&apos;bbb&apos;</span>), <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;bbb&apos;</span>,<span class="hljs-string">&apos;ccc&apos;</span>));
[&quot;aaa&quot;]

<span class="hljs-keyword">select</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-literal">null</span>),<span class="hljs-literal">null</span>);
[]

<span class="hljs-keyword">select</span> array_remove(<span class="hljs-built_in">array</span>(<span class="hljs-literal">null</span>,<span class="hljs-string">&apos;bbb&apos;</span>),<span class="hljs-string">&apos;aaa&apos;</span>);
[null,&quot;bbb&quot;]
</code></pre>
</li>
<li><p><code>array_slice(array&lt;ANY&gt; values, int offset [, int length])</code> - Slices the given array by the given offset and length parameters.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  array_slice(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">2</span>,<span class="hljs-number">4</span>),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">0</span>, <span class="hljs-comment">-- offset</span>
   <span class="hljs-number">2</span> <span class="hljs-comment">-- length</span>
  ),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">6</span>, <span class="hljs-comment">-- offset</span>
   <span class="hljs-number">3</span> <span class="hljs-comment">-- length</span>
  ),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">6</span>, <span class="hljs-comment">-- offset</span>
   <span class="hljs-number">10</span> <span class="hljs-comment">-- length</span>
  ),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">6</span> <span class="hljs-comment">-- offset</span>
  ),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">-3</span> <span class="hljs-comment">-- offset</span>
  ),
  array_slice(
   <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;zero&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>, <span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>, <span class="hljs-string">&quot;seven&quot;</span>, <span class="hljs-string">&quot;eight&quot;</span>, <span class="hljs-string">&quot;nine&quot;</span>, <span class="hljs-string">&quot;ten&quot;</span>),
   <span class="hljs-number">-3</span>, <span class="hljs-comment">-- offset</span>
   <span class="hljs-number">2</span> <span class="hljs-comment">-- length</span>
  );

 [3,4]
 [&quot;zero&quot;,&quot;one&quot;] 
 [&quot;six&quot;,&quot;seven&quot;,&quot;eight&quot;]
 [&quot;six&quot;,&quot;seven&quot;,&quot;eight&quot;,&quot;nine&quot;,&quot;ten&quot;]
 [&quot;six&quot;,&quot;seven&quot;,&quot;eight&quot;,&quot;nine&quot;,&quot;ten&quot;]
 [&quot;eight&quot;,&quot;nine&quot;,&quot;ten&quot;]
 [&quot;eight&quot;,&quot;nine&quot;]
</code></pre>
</li>
<li><p><code>array_sum(array&lt;number&gt;)</code> - Returns an array&lt;double&gt; in which each element is summed up</p>
<pre><code class="lang-sql">WITH input as (
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>) <span class="hljs-keyword">as</span> nums
  <span class="hljs-keyword">UNION</span> ALL
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>) <span class="hljs-keyword">as</span> nums
)
<span class="hljs-keyword">select</span>
  array_sum(nums)
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">input</span>;

[&quot;3.0&quot;,&quot;5.0&quot;,&quot;7.0&quot;]
</code></pre>
</li>
<li><p><code>array_to_str(array arr [, string sep=&apos;,&apos;])</code> - Convert array to string using a sperator</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_to_str(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),<span class="hljs-string">&apos;-&apos;</span>);
1-2-3
</code></pre>
</li>
<li><p><code>array_union(array1, array2, ...)</code> - Returns the union of a set of arrays</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> array_union(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>));
[1,2]

<span class="hljs-keyword">SELECT</span> array_union(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>));
[1,2,3,5]
</code></pre>
</li>
<li><p><code>conditional_emit(array&lt;boolean&gt; conditions, array&lt;primitive&gt; features)</code> - Emit features of a row according to various conditions</p>
<pre><code class="lang-sql">WITH input as (
   <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>) <span class="hljs-keyword">as</span> conditions, <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>) <span class="hljs-keyword">as</span> features
   <span class="hljs-keyword">UNION</span> ALL
   <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>), <span class="hljs-built_in">array</span>(<span class="hljs-string">&quot;four&quot;</span>, <span class="hljs-string">&quot;five&quot;</span>, <span class="hljs-string">&quot;six&quot;</span>)
)
<span class="hljs-keyword">SELECT</span>
  conditional_emit(
     conditions, features
  )
<span class="hljs-keyword">FROM</span> 
  <span class="hljs-keyword">input</span>;
 one
 three
 four
 five
</code></pre>
</li>
<li><p><code>element_at(array&lt;T&gt; list, int pos)</code> - Returns an element at the given position</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> element_at(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-number">0</span>);
 1

<span class="hljs-keyword">SELECT</span> element_at(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-number">-2</span>);
 3
</code></pre>
</li>
<li><p><code>first_element(x)</code> - Returns the first element in an array</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> first_element(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;a&apos;</span>,<span class="hljs-string">&apos;b&apos;</span>,<span class="hljs-string">&apos;c&apos;</span>));
 a

<span class="hljs-keyword">SELECT</span> first_element(<span class="hljs-built_in">array</span>());
 NULL
</code></pre>
</li>
<li><p><code>float_array(nDims)</code> - Returns an array&lt;float&gt; of nDims elements</p>
</li>
<li><p><code>last_element(x)</code> - Return the last element in an array</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> last_element(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;a&apos;</span>,<span class="hljs-string">&apos;b&apos;</span>,<span class="hljs-string">&apos;c&apos;</span>));
 c
</code></pre>
</li>
<li><p><code>select_k_best(array&lt;number&gt; array, const array&lt;number&gt; importance, const int k)</code> - Returns selected top-k elements as array&lt;double&gt;</p>
</li>
<li><p><code>sort_and_uniq_array(array&lt;int&gt;)</code> - Takes array&lt;int&gt; and returns a sorted array with duplicate elements eliminated</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> sort_and_uniq_array(<span class="hljs-built_in">array</span>(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-2</span>,<span class="hljs-number">10</span>));
 [-2,1,3,10]
</code></pre>
</li>
<li><p><code>subarray(array&lt;ANY&gt; values, int fromIndex [, int toIndex])</code>- Returns a slice of the original array between the inclusive fromIndex and the exclusive toIndex.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">4</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">3</span>,<span class="hljs-number">2</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">0</span>,<span class="hljs-number">2</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>),<span class="hljs-number">-1</span>,<span class="hljs-number">2</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">4</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">4</span>,<span class="hljs-number">6</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">2</span>,<span class="hljs-number">4</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">0</span>,<span class="hljs-number">2</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">4</span>,<span class="hljs-number">6</span>),
  subarray(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>),<span class="hljs-number">4</span>,<span class="hljs-number">7</span>);

 [4,5]
 [3]
 []
 []
 [0,1]
 [0,1]
 [5,6]
 [5,6]
 [3,4]
 [1,2]
 [5,6]
 [5,6]
</code></pre>
</li>
<li><p><code>subarray_endwith(array&lt;int|text&gt; original, int|text key)</code> - Returns an array that ends with the specified key</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> subarray_endwith(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>), <span class="hljs-number">3</span>);
 [1,2,3]
</code></pre>
</li>
<li><p><code>subarray_startwith(array&lt;int|text&gt; original, int|text key)</code> - Returns an array that starts with the specified key</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> subarray_startwith(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>), <span class="hljs-number">2</span>);
 [2,3,4]
</code></pre>
</li>
<li><p><code>to_string_array(array&lt;ANY&gt;)</code> - Returns an array of strings</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> to_string_array(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>));

[&quot;1.0&quot;,&quot;2.0&quot;,&quot;3.0&quot;]
</code></pre>
</li>
<li><p><code>to_ordered_list(PRIMITIVE value [, PRIMITIVE key, const string options])</code> - Return list of values sorted by value itself or specific key</p>
<pre><code class="lang-sql">WITH data as (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;apple&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">UNION</span> ALL
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;banana&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">UNION</span> ALL
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;candy&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">UNION</span> ALL
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;donut&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">UNION</span> ALL
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;egg&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span> 
    <span class="hljs-keyword">UNION</span> ALL
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">4</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;candy&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span> <span class="hljs-comment">-- both key and value duplicates</span>
)
<span class="hljs-keyword">SELECT</span>                                                  <span class="hljs-comment">-- expected output</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-reverse&apos;</span>),            <span class="hljs-comment">-- [apple, candy, candy, (banana, egg | egg, banana), donut] (reverse order)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 2&apos;</span>),                <span class="hljs-comment">-- [apple, candy] (top-k)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 100&apos;</span>),              <span class="hljs-comment">-- [apple, candy, candy, (banana, egg | egg, banana), dunut]</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 2 -reverse&apos;</span>),       <span class="hljs-comment">-- [donut, (banana | egg)] (reverse top-k = tail-k)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>),                        <span class="hljs-comment">-- [donut, (banana, egg | egg, banana), candy, candy, apple] (natural order)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -2&apos;</span>),               <span class="hljs-comment">-- [donut, (banana | egg)] (tail-k)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -100&apos;</span>),             <span class="hljs-comment">-- [donut, (banana, egg | egg, banana), candy, candy, apple]</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -2 -reverse&apos;</span>),      <span class="hljs-comment">-- [apple, candy] (reverse tail-k = top-k)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-string">&apos;-k 2&apos;</span>),                     <span class="hljs-comment">-- [egg, donut] (alphabetically)</span>
    to_ordered_list(<span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -2 -reverse&apos;</span>),             <span class="hljs-comment">-- [5, 4] (top-2 keys)</span>
    to_ordered_list(<span class="hljs-keyword">key</span>),                               <span class="hljs-comment">-- [1, 2, 3, 4, 4, 5] (natural ordered keys)</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 2 -kv_map&apos;</span>),        <span class="hljs-comment">-- {5:&quot;apple&quot;,4:&quot;candy&quot;}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 2 -vk_map&apos;</span>),        <span class="hljs-comment">-- {&quot;apple&quot;:5,&quot;candy&quot;:4}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -2 -kv_map&apos;</span>),       <span class="hljs-comment">-- {1:&quot;donut&quot;,2:&quot;egg&quot;}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k -2 -vk_map&apos;</span>),       <span class="hljs-comment">-- {&quot;donut&quot;:1,&quot;egg&quot;:2}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 4 -dedup -vk_map&apos;</span>), <span class="hljs-comment">-- {&quot;apple&quot;:5,&quot;candy&quot;:4,&quot;banana&quot;:3,&quot;egg&quot;:2}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 4 -vk_map&apos;</span>),        <span class="hljs-comment">-- {&quot;apple&quot;:5,&quot;candy&quot;:4,&quot;banana&quot;:3}</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 4 -dedup&apos;</span>),         <span class="hljs-comment">-- [&quot;apple&quot;,&quot;candy&quot;,&quot;banana&quot;,&quot;egg&quot;]</span>
    to_ordered_list(<span class="hljs-keyword">value</span>, <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;-k 4&apos;</span>)                 <span class="hljs-comment">-- [&quot;apple&quot;,&quot;candy&quot;,&quot;candy&quot;,&quot;banana&quot;]</span>
<span class="hljs-keyword">FROM</span>
    <span class="hljs-keyword">data</span>
</code></pre>
</li>
</ul>
<h1 id="bitset">Bitset</h1>
<ul>
<li><p><code>bits_collect(int|long x)</code> - Returns a bitset in array&lt;long&gt;</p>
</li>
<li><p><code>bits_or(array&lt;long&gt; b1, array&lt;long&gt; b2, ..)</code> - Returns a logical OR given bitsets</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> unbits(bits_or(to_bits(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>)),to_bits(<span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>))));
 [1,2,3,4]
</code></pre>
</li>
<li><p><code>to_bits(int[] indexes)</code> - Returns an bitset representation if the given indexes in long[]</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> to_bits(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">128</span>));
 [14,-9223372036854775808]
</code></pre>
</li>
<li><p><code>unbits(long[] bitset)</code> - Returns an long array of the give bitset representation</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> unbits(to_bits(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)));
 [1,2,3,4]
</code></pre>
</li>
</ul>
<h1 id="compression">Compression</h1>
<ul>
<li><p><code>deflate(TEXT data [, const int compressionLevel])</code> - Returns a compressed BINARY object by using Deflater. The compression level must be in range [-1,9]</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> base91(deflate(<span class="hljs-string">&apos;aaaaaaaaaaaaaaaabbbbccc&apos;</span>));
 AA+=kaIM|WTt!+wbGAA
</code></pre>
</li>
<li><p><code>inflate(BINARY compressedData)</code> - Returns a decompressed STRING by using Inflater</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> inflate(unbase91(base91(deflate(<span class="hljs-string">&apos;aaaaaaaaaaaaaaaabbbbccc&apos;</span>))));
 aaaaaaaaaaaaaaaabbbbccc
</code></pre>
</li>
</ul>
<h1 id="datetime">Datetime</h1>
<ul>
<li><code>sessionize(long timeInSec, long thresholdInSec [, String subject])</code>- Returns a UUID string of a session.<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  sessionize(<span class="hljs-keyword">time</span>, <span class="hljs-number">3600</span>, ip_addr) <span class="hljs-keyword">as</span> session_id, 
  <span class="hljs-keyword">time</span>, ip_addr
<span class="hljs-keyword">FROM</span> (
  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">time</span>, ipaddr 
  <span class="hljs-keyword">FROM</span> weblog 
  <span class="hljs-keyword">DISTRIBUTE</span> <span class="hljs-keyword">BY</span> ip_addr, <span class="hljs-keyword">time</span> <span class="hljs-keyword">SORT</span> <span class="hljs-keyword">BY</span> ip_addr, <span class="hljs-keyword">time</span> <span class="hljs-keyword">DESC</span>
) t1
</code></pre>
</li>
</ul>
<h1 id="json">JSON</h1>
<ul>
<li><p><code>from_json(string jsonString, const string returnTypes [, const array&lt;string&gt;|const string columnNames])</code> - Return Hive object.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span>
  from_json(to_json(<span class="hljs-keyword">map</span>(<span class="hljs-string">&apos;one&apos;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&apos;two&apos;</span>,<span class="hljs-number">2</span>)), <span class="hljs-string">&apos;map&lt;string,int&gt;&apos;</span>),
  from_json(
    <span class="hljs-string">&apos;{ &quot;person&quot; : { &quot;name&quot; : &quot;makoto&quot; , &quot;age&quot; : 37 } }&apos;</span>,
    <span class="hljs-string">&apos;struct&lt;name:string,age:int&gt;&apos;</span>, 
    <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;person&apos;</span>)
  ),
  from_json(
    <span class="hljs-string">&apos;[0.1,1.1,2.2]&apos;</span>,
    <span class="hljs-string">&apos;array&lt;double&gt;&apos;</span>
  ),
  from_json(to_json(
    <span class="hljs-built_in">ARRAY</span>(
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;osaka&quot;</span>)
    )
  ),<span class="hljs-string">&apos;array&lt;struct&lt;country:string,city:string&gt;&gt;&apos;</span>),
  from_json(to_json(
    <span class="hljs-built_in">ARRAY</span>(
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;osaka&quot;</span>)
    ),
    <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;city&apos;</span>)
  ), <span class="hljs-string">&apos;array&lt;struct&lt;country:string,city:string&gt;&gt;&apos;</span>),
  from_json(to_json(
    <span class="hljs-built_in">ARRAY</span>(
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;osaka&quot;</span>)
    )
  ),<span class="hljs-string">&apos;array&lt;struct&lt;city:string&gt;&gt;&apos;</span>);
</code></pre>
<pre><code> {&quot;one&quot;:1,&quot;two&quot;:2}
 {&quot;name&quot;:&quot;makoto&quot;,&quot;age&quot;:37}
 [0.1,1.1,2.2]
 [{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;tokyo&quot;},{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;osaka&quot;}]
 [{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;tokyo&quot;},{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;osaka&quot;}]
 [{&quot;city&quot;:&quot;tokyo&quot;},{&quot;city&quot;:&quot;osaka&quot;}]
</code></pre></li>
<li><p><code>to_json(ANY object [, const array&lt;string&gt;|const string columnNames])</code> - Returns Json string</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>),
  to_json(
     NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>)
  ),
  to_json(
     NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>),
     <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;Name&apos;</span>, <span class="hljs-string">&apos;age&apos;</span>)
  ),
  to_json(
     NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>),
     <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;name&apos;</span>, <span class="hljs-string">&apos;age&apos;</span>)
  ),
  to_json(
     NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>),
     <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;age&apos;</span>)
  ),
  to_json(
     NAMED_STRUCT(<span class="hljs-string">&quot;Name&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">31</span>),
     <span class="hljs-built_in">array</span>()
  ),
  to_json(
     <span class="hljs-literal">null</span>,
     <span class="hljs-built_in">array</span>()
  ),
  to_json(
    <span class="hljs-keyword">struct</span>(<span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-string">&quot;456&quot;</span>, <span class="hljs-number">789</span>, <span class="hljs-built_in">array</span>(<span class="hljs-number">314</span>,<span class="hljs-number">007</span>)),
    <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;ti&apos;</span>,<span class="hljs-string">&apos;si&apos;</span>,<span class="hljs-string">&apos;i&apos;</span>,<span class="hljs-string">&apos;bi&apos;</span>)
  ),
  to_json(
    <span class="hljs-keyword">struct</span>(<span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-string">&quot;456&quot;</span>, <span class="hljs-number">789</span>, <span class="hljs-built_in">array</span>(<span class="hljs-number">314</span>,<span class="hljs-number">007</span>)),
    <span class="hljs-string">&apos;ti,si,i,bi&apos;</span>
  ),
  to_json(
    <span class="hljs-keyword">struct</span>(<span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-string">&quot;456&quot;</span>, <span class="hljs-number">789</span>, <span class="hljs-built_in">array</span>(<span class="hljs-number">314</span>,<span class="hljs-number">007</span>))
  ),
  to_json(
    NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>)
  ),
  to_json(
    NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
    <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;city&apos;</span>)
  ),
  to_json(
    <span class="hljs-built_in">ARRAY</span>(
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;osaka&quot;</span>)
    )
  ),
  to_json(
    <span class="hljs-built_in">ARRAY</span>(
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;tokyo&quot;</span>), 
      NAMED_STRUCT(<span class="hljs-string">&quot;country&quot;</span>, <span class="hljs-string">&quot;japan&quot;</span>, <span class="hljs-string">&quot;city&quot;</span>, <span class="hljs-string">&quot;osaka&quot;</span>)
    ),
    <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;city&apos;</span>)
  );
</code></pre>
<pre><code> {&quot;name&quot;:&quot;John&quot;,&quot;age&quot;:31}
 {&quot;name&quot;:&quot;John&quot;,&quot;age&quot;:31}
 {&quot;Name&quot;:&quot;John&quot;,&quot;age&quot;:31}
 {&quot;name&quot;:&quot;John&quot;,&quot;age&quot;:31}
 {&quot;age&quot;:31}
 {}
 NULL
 {&quot;ti&quot;:&quot;123&quot;,&quot;si&quot;:&quot;456&quot;,&quot;i&quot;:789,&quot;bi&quot;:[314,7]}
 {&quot;ti&quot;:&quot;123&quot;,&quot;si&quot;:&quot;456&quot;,&quot;i&quot;:789,&quot;bi&quot;:[314,7]}
 {&quot;col1&quot;:&quot;123&quot;,&quot;col2&quot;:&quot;456&quot;,&quot;col3&quot;:789,&quot;col4&quot;:[314,7]}
 {&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;tokyo&quot;}
 {&quot;city&quot;:&quot;tokyo&quot;}
 [{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;tokyo&quot;},{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;osaka&quot;}]
 [{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;tokyo&quot;},{&quot;country&quot;:&quot;japan&quot;,&quot;city&quot;:&quot;osaka&quot;}]
</code></pre></li>
</ul>
<h1 id="map">Map</h1>
<ul>
<li><p><code>map_exclude_keys(Map&lt;K,V&gt; map, array&lt;K&gt; filteringKeys)</code> - Returns the filtered entries of a map not having specified keys</p>
<pre><code class="lang-sql">SELECT map_exclude_keys(map(1,&apos;one&apos;,2,&apos;two&apos;,3,&apos;three&apos;),array(2,3));
{1:&quot;one&quot;}
</code></pre>
</li>
<li><p><code>map_get(MAP&lt;K&gt; a, K n)</code> - Returns the value corresponding to the key in the map.</p>
<pre><code class="lang-sql">Note this is a workaround for a Hive issue that non-constant expression for map indexes not supported.
See https://issues.apache.org/jira/browse/HIVE-1955

WITH tmp as (
  SELECT &quot;one&quot; as key
  UNION ALL
  SELECT &quot;two&quot; as key
)
SELECT map_get(map(&quot;one&quot;,1,&quot;two&quot;,2),key)
FROM tmp;

&gt; 1
&gt; 2
</code></pre>
</li>
<li><p><code>map_get_sum(map&lt;int,float&gt; src, array&lt;int&gt; keys)</code> - Returns sum of values that are retrieved by keys</p>
</li>
<li><p><code>map_include_keys(Map&lt;K,V&gt; map, array&lt;K&gt; filteringKeys)</code> - Returns the filtered entries of a map having specified keys</p>
<pre><code class="lang-sql">SELECT map_include_keys(map(1,&apos;one&apos;,2,&apos;two&apos;,3,&apos;three&apos;),array(2,3));
{2:&quot;two&quot;,3:&quot;three&quot;}
</code></pre>
</li>
<li><p><code>map_key_values(MAP&lt;K, V&gt; map)</code> - Returns a array of key-value pairs in array&lt;named_struct&lt;key,value&gt;&gt;</p>
<pre><code class="lang-sql">SELECT map_key_values(map(&quot;one&quot;,1,&quot;two&quot;,2));

&gt; [{&quot;key&quot;:&quot;one&quot;,&quot;value&quot;:1},{&quot;key&quot;:&quot;two&quot;,&quot;value&quot;:2}]
</code></pre>
</li>
<li><p><code>map_roulette(Map&lt;K, number&gt; map [, (const)</code> int/bigint seed]) - Returns a map key based on weighted random sampling of map values. Average of values is used for null values</p>
<pre><code class="lang-sql">-- `map_roulette(map&lt;key, number&gt; [, integer seed])` returns key by weighted random selection
SELECT 
  map_roulette(to_map(a, b)) -- 25% Tom, 21% Zhang, 54% Wang
FROM ( -- see https://issues.apache.org/jira/browse/HIVE-17406
  select &apos;Wang&apos; as a, 54 as b
  union all
  select &apos;Zhang&apos; as a, 21 as b
  union all
  select &apos;Tom&apos; as a, 25 as b
) tmp;
&gt; Wang

-- Weight random selection with using filling nulls with the average value
SELECT
  map_roulette(map(1, 0.5, &apos;Wang&apos;, null)), -- 50% Wang, 50% 1
  map_roulette(map(1, 0.5, &apos;Wang&apos;, null, &apos;Zhang&apos;, null)) -- 1/3 Wang, 1/3 1, 1/3 Zhang
;

-- NULL will be returned if every key is null
SELECT 
  map_roulette(map()),
  map_roulette(map(null, null, null, null));
&gt; NULL    NULL

-- Return NULL if all weights are zero
SELECT
  map_roulette(map(1, 0)),
  map_roulette(map(1, 0, &apos;5&apos;, 0))
;
&gt; NULL    NULL

-- map_roulette does not support non-numeric weights or negative weights.
SELECT map_roulette(map(&apos;Wong&apos;, &apos;A string&apos;, &apos;Zhao&apos;, 2));
&gt; HiveException: Error evaluating map_roulette(map(&apos;Wong&apos;:&apos;A string&apos;,&apos;Zhao&apos;:2))
SELECT map_roulette(map(&apos;Wong&apos;, &apos;A string&apos;, &apos;Zhao&apos;, 2));
&gt; UDFArgumentException: Map value must be greather than or equals to zero: -2
</code></pre>
</li>
<li><p><code>map_tail_n(map SRC, int N)</code> - Returns the last N elements from a sorted array of SRC</p>
</li>
<li><p><code>merge_maps(Map x)</code> - Returns a map which contains the union of an aggregation of maps. Note that an existing value of a key can be replaced with the other duplicate key entry.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  merge_maps(m) 
<span class="hljs-keyword">FROM</span> (
  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">map</span>(<span class="hljs-string">&apos;A&apos;</span>,<span class="hljs-number">10</span>,<span class="hljs-string">&apos;B&apos;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&apos;C&apos;</span>,<span class="hljs-number">30</span>) 
  <span class="hljs-keyword">UNION</span> ALL 
  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">map</span>(<span class="hljs-string">&apos;A&apos;</span>,<span class="hljs-number">10</span>,<span class="hljs-string">&apos;B&apos;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&apos;C&apos;</span>,<span class="hljs-number">30</span>)
) t
</code></pre>
</li>
<li><p><code>to_map(key, value)</code> - Convert two aggregated columns into a key-value map</p>
<pre><code class="lang-sql">WITH input as (
  select &apos;aaa&apos; as key, 111 as value
  UNION all
  select &apos;bbb&apos; as key, 222 as value
)
select to_map(key, value)
from input;

&gt; {&quot;bbb&quot;:222,&quot;aaa&quot;:111}
</code></pre>
</li>
<li><p><code>to_ordered_map(key, value [, const int k|const boolean reverseOrder=false])</code> - Convert two aggregated columns into an ordered key-value map</p>
<pre><code class="lang-sql">with t as (
    <span class="hljs-keyword">select</span> <span class="hljs-number">10</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;apple&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">union</span> all
    <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;banana&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
    <span class="hljs-keyword">union</span> all
    <span class="hljs-keyword">select</span> <span class="hljs-number">4</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">key</span>, <span class="hljs-string">&apos;candy&apos;</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
)
<span class="hljs-keyword">select</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-literal">true</span>),   <span class="hljs-comment">-- {10:&quot;apple&quot;,4:&quot;candy&quot;,3:&quot;banana&quot;} (reverse)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">1</span>),      <span class="hljs-comment">-- {10:&quot;apple&quot;} (top-1)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">2</span>),      <span class="hljs-comment">-- {10:&quot;apple&quot;,4:&quot;candy&quot;} (top-2)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">3</span>),      <span class="hljs-comment">-- {10:&quot;apple&quot;,4:&quot;candy&quot;,3:&quot;banana&quot;} (top-3)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">100</span>),    <span class="hljs-comment">-- {10:&quot;apple&quot;,4:&quot;candy&quot;,3:&quot;banana&quot;} (top-100)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>),         <span class="hljs-comment">-- {3:&quot;banana&quot;,4:&quot;candy&quot;,10:&quot;apple&quot;} (natural)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">-1</span>),     <span class="hljs-comment">-- {3:&quot;banana&quot;} (tail-1)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">-2</span>),     <span class="hljs-comment">-- {3:&quot;banana&quot;,4:&quot;candy&quot;} (tail-2)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">-3</span>),     <span class="hljs-comment">-- {3:&quot;banana&quot;,4:&quot;candy&quot;,10:&quot;apple&quot;} (tail-3)</span>
    to_ordered_map(<span class="hljs-keyword">key</span>, <span class="hljs-keyword">value</span>, <span class="hljs-number">-100</span>)    <span class="hljs-comment">-- {3:&quot;banana&quot;,4:&quot;candy&quot;,10:&quot;apple&quot;} (tail-100)</span>
<span class="hljs-keyword">from</span> t
</code></pre>
</li>
</ul>
<h1 id="mapreduce">MapReduce</h1>
<ul>
<li><p><code>distcache_gets(filepath, key, default_value [, parseKey])</code> - Returns map&lt;key_type, value_type&gt;|value_type</p>
</li>
<li><p><code>jobconf_gets()</code> - Returns the value from JobConf</p>
</li>
<li><p><code>jobid()</code> - Returns the value of mapred.job.id</p>
</li>
<li><p><code>rowid()</code> - Returns a generated row id of a form {TASK_ID}-{SEQUENCE_NUMBER}</p>
</li>
<li><p><code>rownum()</code> - Returns a generated row number <code>sprintf(</code>%d%04d<code>,sequence,taskId)</code> in long</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">rownum</span>() <span class="hljs-keyword">as</span> <span class="hljs-keyword">rownum</span>, xxx <span class="hljs-keyword">from</span> ...
</code></pre>
</li>
<li><p><code>taskid()</code> - Returns the value of mapred.task.partition</p>
</li>
</ul>
<h1 id="math">Math</h1>
<ul>
<li><p><code>infinity()</code> - Returns the constant representing positive infinity.</p>
</li>
<li><p><code>is_finite(x)</code> - Determine if x is finite.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> is_finite(<span class="hljs-number">333</span>), is_finite(infinity());
true false
</code></pre>
</li>
<li><p><code>is_infinite(x)</code> - Determine if x is infinite.</p>
</li>
<li><p><code>is_nan(x)</code> - Determine if x is not-a-number.</p>
</li>
<li><p><code>l2_norm(double x)</code> - Return a L2 norm of the given input x.</p>
<pre><code class="lang-sql">WITH input as (
  <span class="hljs-keyword">select</span> generate_series(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> v
)
<span class="hljs-keyword">select</span> l2_norm(v) <span class="hljs-keyword">as</span> l2norm
<span class="hljs-keyword">from</span> <span class="hljs-keyword">input</span>;
3.7416573867739413 = sqrt(1^2+2^2+3^2))
</code></pre>
</li>
<li><p><code>nan()</code> - Returns the constant representing not-a-number.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">nan</span>(), is_nan(<span class="hljs-keyword">nan</span>());
NaN true
</code></pre>
</li>
<li><p><code>sigmoid(x)</code> - Returns 1.0 / (1.0 + exp(-x))</p>
<pre><code class="lang-sql">WITH input as (
  <span class="hljs-keyword">SELECT</span> <span class="hljs-number">3.0</span> <span class="hljs-keyword">as</span> x
  <span class="hljs-keyword">UNION</span> ALL
  <span class="hljs-keyword">SELECT</span> <span class="hljs-number">-3.0</span> <span class="hljs-keyword">as</span> x
)
<span class="hljs-keyword">select</span> 
  <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + <span class="hljs-keyword">exp</span>(-x)),
  sigmoid(x)
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">input</span>;
0.04742587317756678   0.04742587357759476
0.9525741268224334    0.9525741338729858
</code></pre>
</li>
</ul>
<h1 id="vectormatrix">Vector/Matrix</h1>
<ul>
<li><p><code>transpose_and_dot(array&lt;number&gt; X, array&lt;number&gt; Y)</code> - Returns dot(X.T, Y) as array&lt;array&lt;double&gt;&gt;, shape = (X.#cols, Y.#cols)</p>
<pre><code class="lang-sql">WITH input as (
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>) <span class="hljs-keyword">as</span> x, <span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> y
  <span class="hljs-keyword">UNION</span> ALL
  <span class="hljs-keyword">select</span> <span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">5.0</span>) <span class="hljs-keyword">as</span> x, <span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> y
)
<span class="hljs-keyword">select</span>
  transpose_and_dot(x, y) <span class="hljs-keyword">as</span> xy,
  transpose_and_dot(y, x) <span class="hljs-keyword">as</span> yx
<span class="hljs-keyword">from</span> 
  <span class="hljs-keyword">input</span>;

[[&quot;3.0&quot;,&quot;6.0&quot;],[&quot;5.0&quot;,&quot;10.0&quot;],[&quot;7.0&quot;,&quot;14.0&quot;],[&quot;9.0&quot;,&quot;18.0&quot;]]   [[&quot;3.0&quot;,&quot;5.0&quot;,&quot;7.0&quot;,&quot;9.0&quot;],[&quot;6.0&quot;,&quot;10.0&quot;,&quot;14.0&quot;,&quot;18.0&quot;]]
</code></pre>
</li>
<li><p><code>vector_add(array&lt;NUMBER&gt; x, array&lt;NUMBER&gt; y)</code> - Perform vector ADD operation.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> vector_add(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>), <span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>));
[3.0,5.0,7.0]
</code></pre>
</li>
<li><p><code>vector_dot(array&lt;NUMBER&gt; x, array&lt;NUMBER&gt; y)</code> - Performs vector dot product.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> vector_dot(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>),<span class="hljs-built_in">array</span>(<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>,<span class="hljs-number">4.0</span>));
20

<span class="hljs-keyword">SELECT</span> vector_dot(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>),<span class="hljs-number">2</span>);
[2.0,4.0,6.0]
</code></pre>
</li>
</ul>
<h1 id="sanity-checks">Sanity Checks</h1>
<ul>
<li><p><code>assert(boolean condition)</code> or <em>FUNC</em>(boolean condition, string errMsg)- Throws HiveException if condition is not met</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">count</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">FROM</span> stock_price <span class="hljs-keyword">WHERE</span> assert(price &gt; <span class="hljs-number">0.0</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">count</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">FROM</span> stock_price <span class="hljs-keyword">WHERE</span> assert(price &gt; <span class="hljs-number">0.0</span>, <span class="hljs-string">&apos;price MUST be more than 0.0&apos;</span>)
</code></pre>
</li>
<li><p><code>raise_error()</code> or <em>FUNC</em>(string msg) - Throws an error</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> product_id, price, raise_error(<span class="hljs-string">&apos;Found an invalid record&apos;</span>) <span class="hljs-keyword">FROM</span> xxx <span class="hljs-keyword">WHERE</span> price &lt; <span class="hljs-number">0.0</span>
</code></pre>
</li>
</ul>
<h1 id="text-processing">Text processing</h1>
<ul>
<li><p><code>base91(BINARY bin)</code> - Convert the argument from binary to a BASE91 string</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> base91(deflate(<span class="hljs-string">&apos;aaaaaaaaaaaaaaaabbbbccc&apos;</span>));
 AA+=kaIM|WTt!+wbGAA
</code></pre>
</li>
<li><p><code>is_stopword(string word)</code> - Returns whether English stopword or not</p>
</li>
<li><p><code>normalize_unicode(string str [, string form])</code> - Transforms <code>str</code> with the specified normalization form. The <code>form</code> takes one of NFC (default), NFD, NFKC, or NFKD</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> normalize_unicode(<span class="hljs-string">&apos;&#xFF8A;&#xFF9D;&#xFF76;&#xFF78;&#xFF76;&#xFF85;&apos;</span>,<span class="hljs-string">&apos;NFKC&apos;</span>);
 &#x30CF;&#x30F3;&#x30AB;&#x30AF;&#x30AB;&#x30CA;

<span class="hljs-keyword">SELECT</span> normalize_unicode(<span class="hljs-string">&apos;&#x3231;&#x3327;&#x3326;&#x2162;&apos;</span>,<span class="hljs-string">&apos;NFKC&apos;</span>);
 (&#x682A;)&#x30C8;&#x30F3;&#x30C9;&#x30EB;III
</code></pre>
</li>
<li><p><code>singularize(string word)</code> - Returns singular form of a given English word</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> singularize(<span class="hljs-keyword">lower</span>(<span class="hljs-string">&quot;Apples&quot;</span>));

 &quot;apple&quot;
</code></pre>
</li>
<li><p><code>split_words(string query [, string regex])</code> - Returns an array&lt;text&gt; containing splitted strings</p>
</li>
<li><p><code>tokenize(string englishText [, boolean toLowerCase])</code> - Returns tokenized words in array&lt;string&gt;</p>
</li>
<li><p><code>unbase91(string)</code> - Convert a BASE91 string to a binary</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> inflate(unbase91(base91(deflate(<span class="hljs-string">&apos;aaaaaaaaaaaaaaaabbbbccc&apos;</span>))));
 aaaaaaaaaaaaaaaabbbbccc
</code></pre>
</li>
<li><p><code>word_ngrams(array&lt;string&gt; words, int minSize, int maxSize])</code> - Returns list of n-grams for given words, where <code>minSize &amp;lt;= n &amp;lt;= maxSize</code></p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> word_ngrams(tokenize(<span class="hljs-string">&apos;Machine learning is fun!&apos;</span>, <span class="hljs-literal">true</span>), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);

 [&quot;machine&quot;,&quot;machine learning&quot;,&quot;learning&quot;,&quot;learning is&quot;,&quot;is&quot;,&quot;is fun&quot;,&quot;fun&quot;]
</code></pre>
</li>
<li><p><code>str_contains(string query, array&lt;string&gt; searchTerms [, boolean orQuery=false])</code> - Returns true if the given query contains search terms</p>
<pre><code class="lang-sql">select
  str_contains(&apos;There are apple and orange&apos;, array(&apos;apple&apos;)), -- or=false
  str_contains(&apos;There are apple and orange&apos;, array(&apos;apple&apos;, &apos;banana&apos;), true), -- or=true
  str_contains(&apos;There are apple and orange&apos;, array(&apos;apple&apos;, &apos;banana&apos;), false); -- or=false
&gt; true, true, false
</code></pre>
</li>
</ul>
<h1 id="timeseries">Timeseries</h1>
<ul>
<li><code>moving_avg(NUMBER value, const int windowSize)</code> - Returns moving average of a time series using a given window<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> moving_avg(x, <span class="hljs-number">3</span>) <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> explode(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>,<span class="hljs-number">4.0</span>,<span class="hljs-number">5.0</span>,<span class="hljs-number">6.0</span>,<span class="hljs-number">7.0</span>)) <span class="hljs-keyword">as</span> x) series;
 1.0
 1.5
 2.0
 3.0
 4.0
 5.0
 6.0
</code></pre>
</li>
</ul>
<h1 id="others">Others</h1>
<ul>
<li><p><code>convert_label(const int|const float)</code> - Convert from -1|1 to 0.0f|1.0f, or from 0.0f|1.0f to -1|1</p>
</li>
<li><p><code>each_top_k(int K, Object group, double cmpKey, *)</code> - Returns top-K values (or tail-K values when k is less than 0)</p>
</li>
<li><p><code>generate_series(const int|bigint start, const int|bigint end)</code> - Generate a series of values, from start to end. A similar function to PostgreSQL&apos;s <a href="https://www.postgresql.org/docs/current/static/functions-srf.html" target="_blank">generate_serics</a></p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> generate_series(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>);

 2
 3
 4

<span class="hljs-keyword">SELECT</span> generate_series(<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">-2</span>);

 5
 3
 1

<span class="hljs-keyword">SELECT</span> generate_series(<span class="hljs-number">4</span>,<span class="hljs-number">3</span>);

 (no return)

<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">date_add</span>(<span class="hljs-keyword">current_date</span>(),<span class="hljs-keyword">value</span>),<span class="hljs-keyword">value</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">SELECT</span> generate_series(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)) t;

 2018-04-21      1
 2018-04-22      2
 2018-04-23      3

WITH input as (
 <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> c1, <span class="hljs-number">10</span> <span class="hljs-keyword">as</span> c2, <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> step
 <span class="hljs-keyword">UNION</span> ALL
 <span class="hljs-keyword">SELECT</span> <span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-3</span>
)
<span class="hljs-keyword">SELECT</span> generate_series(c1, c2, step) <span class="hljs-keyword">as</span> series
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">input</span>;

 1
 4
 7
 10
 10
 7
 4
</code></pre>
</li>
<li><p><code>try_cast(ANY src, const string typeName)</code> - Explicitly cast a value as a type. Returns null if cast fails.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">try_cast</span>(<span class="hljs-built_in">array</span>(<span class="hljs-number">1.0</span>,<span class="hljs-number">2.0</span>,<span class="hljs-number">3.0</span>), <span class="hljs-string">&apos;array&lt;string&gt;&apos;</span>)
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">try_cast</span>(<span class="hljs-keyword">map</span>(<span class="hljs-string">&apos;A&apos;</span>,<span class="hljs-number">10</span>,<span class="hljs-string">&apos;B&apos;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&apos;C&apos;</span>,<span class="hljs-number">30</span>), <span class="hljs-string">&apos;map&lt;string,double&gt;&apos;</span>)
</code></pre>
</li>
<li><p><code>x_rank(KEY)</code> - Generates a pseudo sequence number starting from 1 for each key</p>
</li>
</ul>
<p><div id="page-footer" class="localized-footer"><hr><!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<p><sub><font color="gray">
Apache Hivemall is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator.
</font></sub></p>
</div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"List of Generic Hivemall Functions","level":"2.1","depth":1,"next":{"title":"Efficient Top-K Query Processing","level":"2.2","depth":1,"path":"misc/topk.md","ref":"misc/topk.md","articles":[]},"previous":{"title":"Map-side join causes ClassCastException on Tez","level":"1.6.5","depth":2,"path":"troubleshooting/mapjoin_classcastex.md","ref":"troubleshooting/mapjoin_classcastex.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-api","edit-link","github","splitter","etoc","callouts","toggle-chapters","anchorjs","codeblock-filename","expandable-chapters","multipart","codeblock-filename","katex","emphasize","localized-footer"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"emphasize":{},"callouts":{},"etoc":{"h2lb":3,"header":1,"maxdepth":3,"mindepth":1,"notoc":true},"github":{"url":"https://github.com/apache/incubator-hivemall/"},"splitter":{},"search":{},"downloadpdf":{"base":"https://github.com/apache/incubator-hivemall/docs/gitbook","label":"PDF","multilingual":false},"multipart":{},"localized-footer":{"filename":"FOOTER.md","hline":"true"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2,"font":"sans"},"highlight":{},"codeblock-filename":{},"theme-api":{"languages":[],"split":false,"theme":"dark"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit","base":"https://github.com/apache/incubator-hivemall/tree/master/docs/gitbook"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{"selector":"h1,h2,h3,*:not(.callout) > h4,h5"},"toggle-chapters":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Hivemall User Manual","links":{"sidebar":{"<i class=\"fa fa-home\"></i> Home":"https://hivemall.incubator.apache.org/"}},"gitbook":"3.x.x","description":"User Manual for Apache Hivemall"},"file":{"path":"misc/generic_funcs.md","mtime":"2021-04-22T11:42:38.141Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-04-22T11:56:59.644Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

